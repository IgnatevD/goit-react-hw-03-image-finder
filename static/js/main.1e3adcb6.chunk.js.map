{"version":3,"sources":["Components/Button/Button.jsx","Components/Modal/Modal.jsx","Components/ImageGallery/ImageGalleryItem/ImageGalleryItem.jsx","Api/Api.js","Components/ImageGallery/ImageGallery.jsx","Components/Searchbar/Searchbar.jsx","Components/App.jsx","index.js"],"names":["Button","newPage","type","className","onClick","modalRoot","document","querySelector","Modal","state","closeModalFn","e","code","props","onClose","closeModalBd","target","currentTarget","window","addEventListener","this","style","overflow","removeEventListener","createPortal","src","largeImageURL","alt","Component","ImageGalleryItem","showModal","toggleModal","setState","previewURL","name","pixAPI","fetchPixabay","nextName","page","fetch","then","response","ok","json","Promise","reject","Error","ImageGallery","pixabay","loding","error","status","pixabays","hits","newImg","scrollTo","top","documentElement","scrollHeight","behavior","catch","finally","pixabayName","prevProps","prevState","color","height","width","timeout","massage","map","img","tags","id","length","Searchbar","searcName","getNameChange","value","toLowerCase","getSubmitForm","preventDefault","trim","toast","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","onGetSubmit","onSubmit","onChange","autoComplete","autoFocus","placeholder","App","getFormSubmit","searcNameForm","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.1e3adcb6.chunk.js","sourcesContent":["const Button = ({ newPage }) => {\n  return (\n    <button type=\"button\" className=\"Button\" onClick={newPage}>\n      Загрузить еще\n    </button>\n  );\n};\n\nexport default Button;\n","import React, { Component } from \"react\";\nimport { createPortal } from \"react-dom\";\n\nconst modalRoot = document.querySelector(\"#modal\");\n\nclass Modal extends Component {\n  state = {};\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.closeModalFn);\n    const body = document.querySelector(\"body\");\n    body.style.overflow = \"hidden\";\n  }\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.closeModalFn);\n    const body = document.querySelector(\"body\");\n    body.style.overflow = \"auto\";\n  }\n\n  closeModalFn = (e) => {\n    if (e.code === \"Escape\") this.props.onClose();\n  };\n\n  closeModalBd = (e) => {\n    if (e.target === e.currentTarget) this.props.onClose();\n  };\n\n  render() {\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.closeModalBd}>\n        <div className=\"Modal\">\n          <img src={this.props.largeImageURL} alt=\"\" />\n        </div>\n      </div>,\n      modalRoot\n    );\n  }\n}\n\nexport default Modal;\n","import React, { Component } from \"react\";\nimport Modal from \"../../Modal/Modal\";\n\nclass ImageGalleryItem extends Component {\n  state = { showModal: false };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n  render() {\n    const { previewURL, largeImageURL, name } = this.props;\n\n    return (\n      <li className=\"ImageGalleryItem\">\n        <img\n          src={previewURL}\n          alt={name}\n          className=\"ImageGalleryItem-image\"\n          onClick={this.toggleModal}\n        />\n        {this.state.showModal && (\n          <Modal onClose={this.toggleModal} largeImageURL={largeImageURL} />\n        )}\n      </li>\n    );\n  }\n}\n\nexport default ImageGalleryItem;\n","function fetchPixabay(nextName, page) {\n  const API = \"22732940-a59bc7fc166a5b76f0ac36f93\";\n\n  return fetch(`https://pixabay.com/api/?q=${nextName}&page=${page}&key=${API}&image_type=photo&orientation=horizontal&per_page=12\n          `).then((response) => {\n    if (response.ok) {\n      return response.json();\n    }\n    return Promise.reject(\n      new Error(`Нет изображений с таким именем ${nextName}`)\n    );\n  });\n}\nconst pixAPI = { fetchPixabay };\nexport default pixAPI;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Loader from \"react-loader-spinner\";\nimport Button from \"../Button/Button\";\nimport ImageGalleryItem from \"./ImageGalleryItem/ImageGalleryItem\";\nimport pixAPI from \"../../Api/Api\";\n\nclass ImageGallery extends Component {\n  state = {\n    pixabay: null,\n    loding: false,\n    error: null,\n    page: 1,\n    status: \"idle\",\n    name: \"\",\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const nextName = this.props.pixabayName;\n\n    if (prevProps.pixabayName !== nextName) {\n      this.setState({ status: \"panding\", name: nextName, page: 1 });\n      const page = this.state.page;\n\n      pixAPI\n        .fetchPixabay(nextName, page)\n        .then((pixabays) => pixabays.hits)\n        .then((pixabay) =>\n          this.setState({\n            pixabay,\n            status: \"resolved\",\n            page: this.state.page + 1,\n          })\n        )\n        .catch((error) => {\n          this.setState({ error, status: \"rejected\" });\n        })\n        .finally(() => this.setState({ loding: false }));\n    }\n  }\n\n  newPage = () => {\n    const { pixabay, name, page } = this.state;\n    pixAPI\n      .fetchPixabay(name, page)\n      .then((pixabays) => pixabays.hits)\n      .then((newImg) => {\n        this.setState({\n          pixabay: [...pixabay, ...newImg],\n          status: \"resolved\",\n          page: this.state.page + 1,\n        });\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: \"smooth\",\n        });\n      })\n      .catch((error) => {\n        this.setState({ error, status: \"rejected\" });\n      })\n      .finally(() => this.setState({ loding: false }));\n\n    if (this.props.pixabayName !== name) {\n      this.setState({ page: 1 });\n    }\n  };\n\n  render() {\n    const { pixabay, error, status } = this.state;\n\n    if (status === \"idle\") {\n      return <h2 className=\"title\">Введите запрос для поиска изображений</h2>;\n    }\n\n    if (status === \"panding\") {\n      return (\n        <div className=\"conteinerLoding\">\n          <Loader\n            type=\"Puff\"\n            color=\"#000000\"\n            height={100}\n            width={100}\n            timeout={2000}\n          />\n          <h2 className=\"titleLoding\">Загружаем изображения...</h2>\n        </div>\n      );\n    }\n\n    if (status === \"rejected\") {\n      return <h2>{error.massage}</h2>;\n    }\n\n    if (status === \"resolved\") {\n      return (\n        <div className=\"conteinerImageGallery\">\n          <ul className=\"ImageGallery\">\n            {pixabay.map((img) => (\n              <ImageGalleryItem\n                key={img.id}\n                previewURL={img.previewURL}\n                largeImageURL={img.largeImageURL}\n                name={img.tags}\n              />\n            ))}\n          </ul>\n          {pixabay.length && <Button newPage={this.newPage} />}\n          {!pixabay.length && (\n            <div>\n              Нет изображений по данному запросу - {this.props.pixabayName}\n            </div>\n          )}\n        </div>\n      );\n    }\n  }\n}\n\nImageGallery.propTypes = {\n  pixabay: PropTypes.array,\n  loding: PropTypes.bool,\n  error: PropTypes.string,\n  page: 1,\n  status: PropTypes.string,\n  name: PropTypes.string,\n};\n\nexport default ImageGallery;\n","import React, { Component } from \"react\";\nimport { toast } from \"react-toastify\";\n\nclass Searchbar extends Component {\n  state = { searcName: \"\" };\n  getNameChange = (e) => {\n    this.setState({ searcName: e.currentTarget.value.toLowerCase() });\n  };\n\n  getSubmitForm = (e) => {\n    e.preventDefault();\n    if (this.state.searcName.trim() === \"\") {\n      return toast.error(\"Введите слово для поиска\", {\n        position: \"top-right\",\n        autoClose: 2000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n      });\n    }\n    this.props.onGetSubmit(this.state.searcName);\n    this.setState({ searcName: \"\" });\n  };\n\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form className=\"SearchForm\" onSubmit={this.getSubmitForm}>\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            value={this.state.searcName}\n            onChange={this.getNameChange}\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nimport ImageGallery from \"./ImageGallery/ImageGallery\";\n// import Modal from \"./Modal/Modal\";\nimport Searchbar from \"./Searchbar/Searchbar\";\n\nclass App extends Component {\n  state = {\n    pixabayName: \"\",\n  };\n\n  getFormSubmit = (searcNameForm) => {\n    this.setState({ pixabayName: searcNameForm });\n  };\n\n  render() {\n    const { pixabayName } = this.state;\n    return (\n      <>\n        <Searchbar onGetSubmit={this.getFormSubmit} />\n        <ImageGallery pixabayName={pixabayName} />\n        <ToastContainer />\n      </>\n    );\n  }\n}\n\nApp.propTypes = {\n  pixabayName: PropTypes.string,\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './Components/App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n\n"],"sourceRoot":""}